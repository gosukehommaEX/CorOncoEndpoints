<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to CorOncoEndpoints • CorOncoEndpoints</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to CorOncoEndpoints">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CorOncoEndpoints</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/introduction.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">Introduction to CorOncoEndpoints</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-usage.html">Advanced Usage and Examples</a></li>
    <li><a class="dropdown-item" href="../articles/theoretical-background.html">Theoretical Background</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gosukehommaEX/CorOncoEndpoints"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to CorOncoEndpoints</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gosukehommaEX/CorOncoEndpoints/blob/main/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gosukehommaEX/CorOncoEndpoints" class="external-link">CorOncoEndpoints</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>CorOncoEndpoints</code> package provides tools for
generating correlated oncology endpoints in clinical trial simulations.
This vignette introduces the basic functionality and common use
cases.</p>
</div>
<div class="section level2">
<h2 id="why-coroncoendpoints">Why CorOncoEndpoints?<a class="anchor" aria-label="anchor" href="#why-coroncoendpoints"></a>
</h2>
<p>In oncology clinical trials, we often need to simulate multiple
correlated endpoints:</p>
<ul>
<li>
<strong>Overall Survival (OS)</strong>: Time from randomization to
death</li>
<li>
<strong>Progression-Free Survival (PFS)</strong>: Time from
randomization to progression or death</li>
<li>
<strong>Objective Response (Response)</strong>: Binary indicator of
tumor response</li>
</ul>
<p>These endpoints are not independent—they exhibit natural
correlations. For example:</p>
<ul>
<li>Patients who respond to treatment tend to have longer survival
times</li>
<li>PFS is always ≤ OS (you cannot die before progressing)</li>
<li>Response is associated with both OS and PFS</li>
</ul>
<p><code>CorOncoEndpoints</code> generates realistic simulated data that
preserves these correlation structures.</p>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<div class="section level3">
<h3 id="example-1-generate-os-and-response">Example 1: Generate OS and Response<a class="anchor" aria-label="anchor" href="#example-1-generate-os-and-response"></a>
</h3>
<p>Let’s start with a simple example generating correlated OS and
Response data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate data for two groups</span></span>
<span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rOncoEndpoints.html">rOncoEndpoints</a></span><span class="op">(</span></span>
<span>  nsim <span class="op">=</span> <span class="fl">100</span>,                           <span class="co"># 100 simulations</span></span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment"</span>, <span class="st">"Control"</span><span class="op">)</span>,    <span class="co"># Two treatment groups</span></span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">150</span>, <span class="fl">150</span><span class="op">)</span>,                      <span class="co"># Sample size per group</span></span>
<span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.3</span><span class="op">)</span>,                      <span class="co"># Response rates</span></span>
<span>  hazard_OS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.07</span><span class="op">)</span>,            <span class="co"># Hazard rates for OS</span></span>
<span>  rho_tte_resp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.2</span><span class="op">)</span>,           <span class="co"># Correlation between OS and Response</span></span>
<span>  copula <span class="op">=</span> <span class="st">"Clayton"</span>                    <span class="co"># Copula family</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View first few rows</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   simID     Group         OS Response</span></span>
<span><span class="co">#&gt; 1     1 Treatment  6.7816835        0</span></span>
<span><span class="co">#&gt; 2     1 Treatment 31.0521872        0</span></span>
<span><span class="co">#&gt; 3     1 Treatment 10.5180043        1</span></span>
<span><span class="co">#&gt; 4     1 Treatment 42.9146021        1</span></span>
<span><span class="co">#&gt; 5     1 Treatment 56.4245855        0</span></span>
<span><span class="co">#&gt; 6     1 Treatment  0.9325366        0</span></span>
<span></span>
<span><span class="co"># Check dimensions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total observations:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data1</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Total observations: 30000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Number of simulations:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data1</span><span class="op">$</span><span class="va">simID</span><span class="op">)</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of simulations: 100</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Groups:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data1</span><span class="op">$</span><span class="va">Group</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Groups: Treatment Control</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-2-all-three-endpoints">Example 2: All Three Endpoints<a class="anchor" aria-label="anchor" href="#example-2-all-three-endpoints"></a>
</h3>
<p>Now let’s generate all three endpoints (OS, PFS, Response):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rOncoEndpoints.html">rOncoEndpoints</a></span><span class="op">(</span></span>
<span>  nsim <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Experimental"</span>, <span class="st">"Standard"</span><span class="op">)</span>,</span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">200</span><span class="op">)</span>,</span>
<span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.35</span><span class="op">)</span>,</span>
<span>  hazard_OS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.04</span>, <span class="fl">0.06</span><span class="op">)</span>,</span>
<span>  hazard_PFS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.08</span>, <span class="fl">0.10</span><span class="op">)</span>,           <span class="co"># Note: hazard_PFS &gt; hazard_OS</span></span>
<span>  rho_tte_resp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.25</span><span class="op">)</span>,          <span class="co"># Correlation between OS and Response</span></span>
<span>  copula <span class="op">=</span> <span class="st">"Frank"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span>
<span><span class="co">#&gt;   simID        Group        OS        PFS Response</span></span>
<span><span class="co">#&gt; 1     1 Experimental 13.758314 13.7583143        1</span></span>
<span><span class="co">#&gt; 2     1 Experimental 38.484101  0.5779209        1</span></span>
<span><span class="co">#&gt; 3     1 Experimental 23.023374 23.0233739        1</span></span>
<span><span class="co">#&gt; 4     1 Experimental  2.137153  0.9313718        1</span></span>
<span><span class="co">#&gt; 5     1 Experimental  8.745343  6.6986000        0</span></span>
<span><span class="co">#&gt; 6     1 Experimental 10.339117 10.3391172        1</span></span></code></pre></div>
<p><strong>Important</strong>: When generating all three endpoints, you
specify the correlation between OS and Response
(<code>rho_tte_resp</code>). The correlation between PFS and Response is
automatically determined by the model structure.</p>
</div>
<div class="section level3">
<h3 id="example-3-verify-correlations">Example 3: Verify Correlations<a class="anchor" aria-label="anchor" href="#example-3-verify-correlations"></a>
</h3>
<p>Let’s check the correlations in our simulated data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For the Experimental group in simulation 1</span></span>
<span><span class="va">sim1_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">data2</span>, <span class="va">simID</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">Group</span> <span class="op">==</span> <span class="st">"Experimental"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Correlation between OS and Response</span></span>
<span><span class="va">cor_os_resp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">sim1_exp</span><span class="op">$</span><span class="va">OS</span>, <span class="va">sim1_exp</span><span class="op">$</span><span class="va">Response</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Correlation (OS, Response):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">cor_os_resp</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Correlation (OS, Response): 0.423</span></span>
<span></span>
<span><span class="co"># Correlation between PFS and Response</span></span>
<span><span class="va">cor_pfs_resp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">sim1_exp</span><span class="op">$</span><span class="va">PFS</span>, <span class="va">sim1_exp</span><span class="op">$</span><span class="va">Response</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Correlation (PFS, Response):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">cor_pfs_resp</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Correlation (PFS, Response): 0.322</span></span>
<span></span>
<span><span class="co"># Correlation between OS and PFS</span></span>
<span><span class="va">cor_os_pfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">sim1_exp</span><span class="op">$</span><span class="va">OS</span>, <span class="va">sim1_exp</span><span class="op">$</span><span class="va">PFS</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Correlation (OS, PFS):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">cor_os_pfs</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Correlation (OS, PFS): 0.54</span></span>
<span></span>
<span><span class="co"># Verify PFS &lt;= OS constraint</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"All PFS &lt;= OS?"</span>, <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">sim1_exp</span><span class="op">$</span><span class="va">PFS</span> <span class="op">&lt;=</span> <span class="va">sim1_exp</span><span class="op">$</span><span class="va">OS</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; All PFS &lt;= OS? TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="validation-of-simulation-results">Validation of Simulation Results<a class="anchor" aria-label="anchor" href="#validation-of-simulation-results"></a>
</h2>
<p>Use <code><a href="../reference/CheckSimResults.html">CheckSimResults()</a></code> to validate that your simulations
match theoretical values:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate more simulations for better validation</span></span>
<span><span class="va">data_val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rOncoEndpoints.html">rOncoEndpoints</a></span><span class="op">(</span></span>
<span>  nsim <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment"</span>, <span class="st">"Control"</span><span class="op">)</span>,</span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>  hazard_OS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.07</span><span class="op">)</span>,</span>
<span>  rho_tte_resp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  copula <span class="op">=</span> <span class="st">"Clayton"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Validate results</span></span>
<span><span class="va">validation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CheckSimResults.html">CheckSimResults</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="va">data_val</span>,</span>
<span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Treatment <span class="op">=</span> <span class="fl">0.4</span>, Control <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>  hazard_OS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Treatment <span class="op">=</span> <span class="fl">0.05</span>, Control <span class="op">=</span> <span class="fl">0.07</span><span class="op">)</span>,</span>
<span>  rho_tte_resp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Treatment <span class="op">=</span> <span class="fl">0.3</span>, Control <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  copula <span class="op">=</span> <span class="st">"Clayton"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">validation</span>, n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 10</span></span></span>
<span><span class="co">#&gt;   Group     Endpoint Empirical Theoretical     Bias Relative_Bias     SE     MSE</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Treatment OS_Mean     20.0         20     0.037<span style="text-decoration: underline;">4</span>          0.187 2.00   3.99   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Treatment OS_Medi…    14.0         13.9   0.092<span style="text-decoration: underline;">4</span>          0.667 1.96   3.86   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Treatment Response     0.401        0.4   0.001<span style="text-decoration: underline;">12</span>         0.280 0.048<span style="text-decoration: underline;">4</span> 0.002<span style="text-decoration: underline;">35</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Treatment Cor_OS_…     0.308        0.3   0.008<span style="text-decoration: underline;">11</span>         2.70  0.097<span style="text-decoration: underline;">2</span> 0.009<span style="text-decoration: underline;">52</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Control   OS_Mean     14.3         14.3   0.022<span style="text-decoration: underline;">9</span>          0.161 1.45   2.11   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Control   OS_Medi…     9.98         9.90  0.073<span style="text-decoration: underline;">4</span>          0.741 1.43   2.05   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Control   Response     0.296        0.3  -<span style="color: #BB0000;">0.003</span><span style="color: #BB0000; text-decoration: underline;">55</span>        -<span style="color: #BB0000;">1.18</span>  0.045<span style="text-decoration: underline;">5</span> 0.002<span style="text-decoration: underline;">08</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Control   Cor_OS_…     0.203        0.2   0.003<span style="text-decoration: underline;">17</span>         1.59  0.099<span style="text-decoration: underline;">4</span> 0.009<span style="text-decoration: underline;">90</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: RMSE &lt;dbl&gt;, Assessment &lt;chr&gt;</span></span></span></code></pre></div>
<p><strong>Interpretation</strong>:</p>
<ul>
<li>
<strong>Bias</strong>: Should be close to 0 for unbiased
methods</li>
<li>
<strong>Relative_Bias</strong>: &lt; 5% is excellent, &lt; 10% is
acceptable</li>
<li>
<strong>SE</strong>: Standard error of estimates across
simulations</li>
<li>
<strong>RMSE</strong>: Overall accuracy measure</li>
</ul>
</div>
<div class="section level2">
<h2 id="understanding-correlation-bounds">Understanding Correlation Bounds<a class="anchor" aria-label="anchor" href="#understanding-correlation-bounds"></a>
</h2>
<p>Not all correlations are feasible. Use
<code><a href="../reference/CorBoundResponseTTE.html">CorBoundResponseTTE()</a></code> to check feasible ranges:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For response probability = 0.4</span></span>
<span><span class="va">bounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CorBoundResponseTTE.html">CorBoundResponseTTE</a></span><span class="op">(</span>p <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Feasible correlation range:"</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">bounds</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"to"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">bounds</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Feasible correlation range: -0.626 to 0.748</span></span>
<span></span>
<span><span class="co"># Try different response probabilities</span></span>
<span><span class="va">p_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="va">bounds_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">p_values</span>, <span class="va">CorBoundResponseTTE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">bounds_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"p ="</span>, <span class="va">p_values</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">bounds_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lower"</span>, <span class="st">"Upper"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">bounds_matrix</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       p = 0.2 p = 0.4 p = 0.6 p = 0.8</span></span>
<span><span class="co">#&gt; Lower  -0.446  -0.626  -0.748  -0.805</span></span>
<span><span class="co">#&gt; Upper   0.805   0.748   0.626   0.446</span></span></code></pre></div>
<p>Notice that the feasible range depends on the response
probability.</p>
</div>
<div class="section level2">
<h2 id="copula-families">Copula Families<a class="anchor" aria-label="anchor" href="#copula-families"></a>
</h2>
<div class="section level3">
<h3 id="clayton-copula">Clayton Copula<a class="anchor" aria-label="anchor" href="#clayton-copula"></a>
</h3>
<ul>
<li>Exhibits lower tail dependence</li>
<li>
<strong>Cannot model negative correlations</strong> (rho &gt; 0
only)</li>
<li>Good for survival data where patients with poor outcomes tend to
have poor outcomes across endpoints</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Clayton copula example</span></span>
<span><span class="va">data_clayton</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rOncoEndpoints.html">rOncoEndpoints</a></span><span class="op">(</span></span>
<span>  nsim <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  p <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>  hazard_OS <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  rho_tte_resp <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  copula <span class="op">=</span> <span class="st">"Clayton"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_clayton</span><span class="op">)</span></span>
<span><span class="co">#&gt;   simID  Group         OS Response</span></span>
<span><span class="co">#&gt; 1     1 Group1  0.9734742        0</span></span>
<span><span class="co">#&gt; 2     1 Group1  1.7577495        0</span></span>
<span><span class="co">#&gt; 3     1 Group1 16.7348480        1</span></span>
<span><span class="co">#&gt; 4     1 Group1 43.1064927        1</span></span>
<span><span class="co">#&gt; 5     1 Group1 21.5900391        0</span></span>
<span><span class="co">#&gt; 6     1 Group1 61.0736650        0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="frank-copula">Frank Copula<a class="anchor" aria-label="anchor" href="#frank-copula"></a>
</h3>
<ul>
<li>Flexible for both positive and negative correlations</li>
<li>Symmetric tail behavior</li>
<li>More general choice</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Frank copula with negative correlation</span></span>
<span><span class="va">bounds_neg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CorBoundResponseTTE.html">CorBoundResponseTTE</a></span><span class="op">(</span>p <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="va">rho_negative</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">0.2</span>  <span class="co"># Must be within bounds</span></span>
<span></span>
<span><span class="va">data_frank</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rOncoEndpoints.html">rOncoEndpoints</a></span><span class="op">(</span></span>
<span>  nsim <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  p <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>  hazard_OS <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  rho_tte_resp <span class="op">=</span> <span class="va">rho_negative</span>,</span>
<span>  copula <span class="op">=</span> <span class="st">"Frank"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check negative correlation</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">data_frank</span><span class="op">[</span><span class="va">data_frank</span><span class="op">$</span><span class="va">simID</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span><span class="op">$</span><span class="va">OS</span>, </span>
<span>    <span class="va">data_frank</span><span class="op">[</span><span class="va">data_frank</span><span class="op">$</span><span class="va">simID</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span><span class="op">$</span><span class="va">Response</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -0.194624</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="common-use-cases">Common Use Cases<a class="anchor" aria-label="anchor" href="#common-use-cases"></a>
</h2>
<div class="section level3">
<h3 id="use-case-1-power-analysis">Use Case 1: Power Analysis<a class="anchor" aria-label="anchor" href="#use-case-1-power-analysis"></a>
</h3>
<p>Generate data under different scenarios to estimate statistical
power:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Scenario: Treatment vs Control</span></span>
<span><span class="va">scenarios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>  hazard_ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>  response_diff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  correlation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For each scenario, generate data and calculate power</span></span>
<span><span class="co"># (Example code structure - not run)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="use-case-2-sample-size-calculation">Use Case 2: Sample Size Calculation<a class="anchor" aria-label="anchor" href="#use-case-2-sample-size-calculation"></a>
</h3>
<p>Determine required sample size for detecting treatment effects:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate data with different sample sizes</span></span>
<span><span class="va">n_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">150</span>, <span class="fl">200</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For each n, simulate trials and calculate detection rates</span></span>
<span><span class="co"># (Example code structure - not run)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="use-case-3-trial-design-evaluation">Use Case 3: Trial Design Evaluation<a class="anchor" aria-label="anchor" href="#use-case-3-trial-design-evaluation"></a>
</h3>
<p>Compare different trial designs (e.g., different endpoints, different
copulas):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare Clayton vs Frank copula</span></span>
<span><span class="co"># Compare OS-only vs OS+Response endpoints</span></span>
<span><span class="co"># (Example code structure - not run)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>This vignette introduced the basic functionality of
<code>CorOncoEndpoints</code>:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Generate correlated endpoints</strong> with
<code><a href="../reference/rOncoEndpoints.html">rOncoEndpoints()</a></code>
</li>
<li>
<strong>Validate simulations</strong> with
<code><a href="../reference/CheckSimResults.html">CheckSimResults()</a></code>
</li>
<li>
<strong>Check feasible correlations</strong> with
<code><a href="../reference/CorBoundResponseTTE.html">CorBoundResponseTTE()</a></code>
</li>
<li>
<strong>Choose appropriate copulas</strong> (Clayton for positive
only, Frank for both)</li>
</ol>
<p>For more advanced usage, see the “Advanced Usage and Examples”
vignette. For theoretical details, see the “Theoretical Background”
vignette.</p>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>Explore the <code>advanced-usage</code> vignette for complex
scenarios</li>
<li>Read the <code>theoretical-background</code> vignette to understand
the mathematical framework</li>
<li>Check function documentation with <code><a href="../reference/rOncoEndpoints.html">?rOncoEndpoints</a></code>,
<code><a href="../reference/CheckSimResults.html">?CheckSimResults</a></code>, etc.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gosuke Homma</p>
</div>

<div class="pkgdown-footer-right">
  <p>Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>.</p>
</div>

    </footer>
</div>





  </body>
</html>
