<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate Correlated Oncology Endpoints for Multiple Groups — rOncoEndpoints • CorOncoEndpoints</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Correlated Oncology Endpoints for Multiple Groups — rOncoEndpoints"><meta name="description" content="A unified function that generates random samples of oncology endpoints with
flexible configurations. This function supports seven different patterns:
OS only
PFS only
Response only
OS + Response (correlated)
PFS + Response (correlated)
OS + PFS (correlated, with PFS &amp;lt;= OS constraint)
OS + PFS + Response (all correlated, with PFS &amp;lt;= OS constraint)


This function is designed specifically for oncology clinical trial simulations,
particularly for generating objective response (Response), progression-free
survival (PFS), and overall survival (OS) data with appropriate correlation
structure."><meta property="og:description" content="A unified function that generates random samples of oncology endpoints with
flexible configurations. This function supports seven different patterns:
OS only
PFS only
Response only
OS + Response (correlated)
PFS + Response (correlated)
OS + PFS (correlated, with PFS &amp;lt;= OS constraint)
OS + PFS + Response (all correlated, with PFS &amp;lt;= OS constraint)


This function is designed specifically for oncology clinical trial simulations,
particularly for generating objective response (Response), progression-free
survival (PFS), and overall survival (OS) data with appropriate correlation
structure."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CorOncoEndpoints</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/introduction.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction to CorOncoEndpoints</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-usage.html">Advanced Usage and Examples</a></li>
    <li><a class="dropdown-item" href="../articles/theoretical-background.html">Theoretical Background</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gosukehommaEX/CorOncoEndpoints"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate Correlated Oncology Endpoints for Multiple Groups</h1>
      <small class="dont-index">Source: <a href="https://github.com/gosukehommaEX/CorOncoEndpoints/blob/main/R/rOncoEndpoints.R" class="external-link"><code>R/rOncoEndpoints.R</code></a></small>
      <div class="d-none name"><code>rOncoEndpoints.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A unified function that generates random samples of oncology endpoints with
flexible configurations. This function supports seven different patterns:</p><ol><li><p>OS only</p></li>
<li><p>PFS only</p></li>
<li><p>Response only</p></li>
<li><p>OS + Response (correlated)</p></li>
<li><p>PFS + Response (correlated)</p></li>
<li><p>OS + PFS (correlated, with PFS &lt;= OS constraint)</p></li>
<li><p>OS + PFS + Response (all correlated, with PFS &lt;= OS constraint)</p></li>
</ol><p>This function is designed specifically for oncology clinical trial simulations,
particularly for generating objective response (Response), progression-free
survival (PFS), and overall survival (OS) data with appropriate correlation
structure.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rOncoEndpoints</span><span class="op">(</span></span>
<span>  <span class="va">nsim</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">n</span>,</span>
<span>  p <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hazard_OS <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hazard_PFS <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rho_tte_resp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  copula <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-nsim">nsim<a class="anchor" aria-label="anchor" href="#arg-nsim"></a></dt>
<dd><p>Integer. The number of simulations to perform. Must be a
positive integer.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>Character vector. Names of the treatment groups. If NULL
(default), groups will be named "Group1", "Group2", etc. Length must
match the lengths of other vector parameters.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Integer vector. Sample sizes for each group. All elements must be
positive integers. Length must match the number of groups.</p></dd>


<dt id="arg-p">p<a class="anchor" aria-label="anchor" href="#arg-p"></a></dt>
<dd><p>Numeric vector or NULL. Marginal probabilities of objective
response for each group. If NULL, no Response endpoint is generated. When
provided, all elements must be between 0 and 1 (exclusive). Length must
match the number of groups. Default is NULL.</p></dd>


<dt id="arg-hazard-os">hazard_OS<a class="anchor" aria-label="anchor" href="#arg-hazard-os"></a></dt>
<dd><p>Numeric vector or NULL. Hazard rates for OS for each group.
If NULL, no OS endpoint is generated. When provided, all elements must be
positive. Length must match the number of groups. Default is NULL.</p></dd>


<dt id="arg-hazard-pfs">hazard_PFS<a class="anchor" aria-label="anchor" href="#arg-hazard-pfs"></a></dt>
<dd><p>Numeric vector or NULL. Hazard rates for PFS for each group.
If NULL, no PFS endpoint is generated. When provided, all elements must
be positive. If both hazard_OS and hazard_PFS are provided, hazard_PFS
must be strictly greater than hazard_OS to ensure PFS &lt;= OS. Length must
match the number of groups. Default is NULL.</p></dd>


<dt id="arg-rho-tte-resp">rho_tte_resp<a class="anchor" aria-label="anchor" href="#arg-rho-tte-resp"></a></dt>
<dd><p>Numeric vector or NULL. Desired correlation coefficients
between a time-to-event endpoint and Response. Required when both a TTE
endpoint (OS or PFS) and p are provided. All elements must be
within the feasible range determined by Fréchet-Hoeffding bounds (which
depend only on p, not on hazard rates). Length must match the number of
groups. Default is NULL.</p></dd>


<dt id="arg-copula">copula<a class="anchor" aria-label="anchor" href="#arg-copula"></a></dt>
<dd><p>Character or NULL. The copula family to use for modeling the
dependence between TTE and Response. Options are "Clayton" or "Frank".
Required when p and at least one TTE endpoint are provided (defaults to
"Clayton" if not specified). Default is NULL.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with nsim * sum(n) rows and columns depending on the
configuration:</p><ul><li><p>OS only: simID, Group, OS</p></li>
<li><p>PFS only: simID, Group, PFS</p></li>
<li><p>Response only: simID, Group, Response</p></li>
<li><p>OS + Response: simID, Group, OS, Response</p></li>
<li><p>PFS + Response: simID, Group, PFS, Response</p></li>
<li><p>OS + PFS: simID, Group, OS, PFS</p></li>
<li><p>OS + PFS + Response: simID, Group, OS, PFS, Response</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function provides seven modes of operation based on which parameters are
provided:</p>
<p><strong>Single endpoint modes:</strong></p><ul><li><p>OS only (hazard_OS provided)</p></li>
<li><p>PFS only (hazard_PFS provided)</p></li>
<li><p>Response only (p provided)</p></li>
</ul><p><strong>Two endpoint modes:</strong></p><ul><li><p>OS + Response (hazard_OS + p): Correlated via copula specified
by rho_tte_resp. The copula parameter is determined solely by p and
rho_tte_resp, independent of hazard_OS.</p></li>
<li><p>PFS + Response (hazard_PFS + p): Correlated via copula specified
by rho_tte_resp. The copula parameter is determined solely by p and
rho_tte_resp, independent of hazard_PFS.</p></li>
<li><p>OS + PFS (hazard_OS + hazard_PFS): Correlated using the Fleischer model,
ensuring PFS &lt;= OS. The correlation is directly determined by the hazard
ratio: Corr(OS, PFS) = hazard_OS / hazard_PFS.</p></li>
</ul><p><strong>Three endpoint mode:</strong></p><ul><li><p>OS + PFS + Response (all three provided): The PFS &lt;= OS constraint is
maintained using the Fleischer model. The Response endpoint is correlated
with OS (not PFS) via the copula specified by rho_tte_resp. The copula
parameter depends only on p and rho_tte_resp.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><strong>CRITICAL: Correlation structure in three-endpoint mode (OS + PFS + Response):</strong></p><ul><li><p>Response is correlated with OS via rho_tte_resp (user-specified)</p></li>
<li><p>Response is NOT directly correlated with PFS</p></li>
<li><p>The correlation between PFS and Response emerges automatically from
the model structure and is NOT user-specified</p></li>
<li><p>To predict the resulting PFS-Response correlation, use
<code><a href="CorResponsePFS.html">CorResponsePFS</a></code> with your specified parameters</p></li>
<li><p>This design reflects the biological assumption that response and
survival are linked through the underlying disease process</p></li>
</ul><p><strong>Important implementation details:</strong></p><ul><li><p>The correlation between a binary Response endpoint and an exponentially
distributed TTE endpoint depends only on the response probability (p) and
the copula parameter, not on the TTE hazard rate. This is a key theoretical
property that simplifies the correlation structure.</p></li>
<li><p>The feasible range of correlations between Response and TTE endpoints
is determined by Fréchet-Hoeffding bounds, which depend only on p.</p></li>
<li><p>For the OS-PFS relationship (Fleischer model), the correlation is
directly determined by the ratio of hazard rates.</p></li>
</ul><p><strong>Copula selection:</strong>
The function uses copula-based methods to model dependencies:</p><ul><li><p>Clayton copula: Suitable for lower tail dependence (strong correlation
at low values). Cannot model negative dependence.</p></li>
<li><p>Frank copula: Flexible for both positive and negative dependence with
symmetric tail behavior.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Fleischer, F., Gaschler-Markefski, B., &amp; Bluhmki, E. (2009). A statistical
model for the dependence between progression-free survival and overall
survival. Statistics in Medicine, 28(21), 2669-2686.</p>
<p>Trivedi, P. K., &amp; Zimmer, D. M. (2005). Copula modeling: an introduction
for practitioners. Foundations and Trends in Econometrics, 1(1), 1-111.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="CopulaParamResponseTTE.html">CopulaParamResponseTTE</a></code>, <code><a href="CorBoundResponseTTE.html">CorBoundResponseTTE</a></code>,
<code><a href="CorResponsePFS.html">CorResponsePFS</a></code>, <code><a href="CheckSimResults.html">CheckSimResults</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1: OS only</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu">rOncoEndpoints</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nsim <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment"</span>, <span class="st">"Control"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hazard_OS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.07</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   simID     Group         OS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 Treatment  6.7816835</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1 Treatment 31.0521872</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1 Treatment 10.5180043</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1 Treatment 42.9146021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 Treatment 56.4245855</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     1 Treatment  0.9325366</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Response only</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">456</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu">rOncoEndpoints</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nsim <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment"</span>, <span class="st">"Control"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   simID     Group Response</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 Treatment        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1 Treatment        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1 Treatment        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1 Treatment        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 Treatment        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     1 Treatment        0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: OS and Response with Clayton copula</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">789</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data3</span> <span class="op">&lt;-</span> <span class="fu">rOncoEndpoints</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nsim <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment"</span>, <span class="st">"Control"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hazard_OS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.07</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rho_tte_resp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  copula <span class="op">=</span> <span class="st">"Clayton"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   simID     Group         OS Response</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 Treatment 24.0724149        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1 Treatment  1.9632601        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1 Treatment  0.2391606        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1 Treatment 17.9104750        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 Treatment 13.5513608        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     1 Treatment  0.4073927        0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4: PFS and Response with Frank copula</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">101</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data4</span> <span class="op">&lt;-</span> <span class="fu">rOncoEndpoints</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nsim <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment"</span>, <span class="st">"Control"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hazard_PFS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.08</span>, <span class="fl">0.10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rho_tte_resp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.15</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  copula <span class="op">=</span> <span class="st">"Frank"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   simID     Group        PFS Response</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 Treatment  5.8191381        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1 Treatment  0.5601767        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1 Treatment 15.4598170        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1 Treatment 13.4004960        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 Treatment  3.5936215        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     1 Treatment  4.4594160        1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 5: OS and PFS (Fleischer model)</span></span></span>
<span class="r-in"><span><span class="co"># Correlation between OS and PFS = hazard_OS / hazard_PFS</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">112</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data5</span> <span class="op">&lt;-</span> <span class="fu">rOncoEndpoints</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nsim <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment"</span>, <span class="st">"Control"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hazard_OS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">16</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hazard_PFS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">14</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   simID     Group         OS        PFS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 Treatment  13.638756  13.638756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1 Treatment  73.614834  73.614834</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1 Treatment 138.878055 138.878055</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1 Treatment 109.142065 109.142065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 Treatment   7.778338   7.778338</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     1 Treatment   3.267516   3.267516</span>
<span class="r-in"><span><span class="co"># Verify correlation</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">data5</span>, <span class="va">Group</span> <span class="op">==</span> <span class="st">"Treatment"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">OS</span>, <span class="va">PFS</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.6970372</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 6: All three endpoints with Frank copula</span></span></span>
<span class="r-in"><span><span class="co"># IMPORTANT: Response is correlated with OS, not PFS!</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">131</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data6</span> <span class="op">&lt;-</span> <span class="fu">rOncoEndpoints</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nsim <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"Experimental"</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">150</span>,</span></span>
<span class="r-in"><span>  p <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  hazard_OS <span class="op">=</span> <span class="fl">0.04</span>,</span></span>
<span class="r-in"><span>  hazard_PFS <span class="op">=</span> <span class="fl">0.06</span>,</span></span>
<span class="r-in"><span>  rho_tte_resp <span class="op">=</span> <span class="fl">0.3</span>,  <span class="co"># This is the correlation between OS and Response</span></span></span>
<span class="r-in"><span>  copula <span class="op">=</span> <span class="st">"Frank"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   simID        Group        OS       PFS Response</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 Experimental  5.780558  5.780558        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1 Experimental  3.336632  3.336632        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1 Experimental  8.677777  8.677777        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1 Experimental 11.781298 11.781298        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 Experimental 46.826435 46.448680        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     1 Experimental 18.833300 18.833300        0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Verify correlations</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"OS-Response correlation:"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">data6</span><span class="op">$</span><span class="va">OS</span>, <span class="va">data6</span><span class="op">$</span><span class="va">Response</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OS-Response correlation: 0.2976105 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"PFS-Response correlation:"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">data6</span><span class="op">$</span><span class="va">PFS</span>, <span class="va">data6</span><span class="op">$</span><span class="va">Response</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PFS-Response correlation: 0.2403529 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict PFS-Response correlation using CorResponsePFS</span></span></span>
<span class="r-in"><span><span class="va">predicted_cor</span> <span class="op">&lt;-</span> <span class="fu"><a href="CorResponsePFS.html">CorResponsePFS</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  p <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  hazard_OS <span class="op">=</span> <span class="fl">0.04</span>,</span></span>
<span class="r-in"><span>  hazard_PFS <span class="op">=</span> <span class="fl">0.06</span>,</span></span>
<span class="r-in"><span>  rho_OS_Response <span class="op">=</span> <span class="fl">0.3</span>,</span></span>
<span class="r-in"><span>  copula <span class="op">=</span> <span class="st">"Frank"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Predicted PFS-Response correlation:"</span>, <span class="va">predicted_cor</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Predicted PFS-Response correlation: 0.2414616 </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gosuke Homma</p>
</div>

<div class="pkgdown-footer-right">
  <p>Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>.</p>
</div>

    </footer></div>





  </body></html>

